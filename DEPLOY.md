# Deployment Guide for Render

This project requires **two** separate services on Render: one for the Backend (Node.js) and one for the Frontend (Next.js).

## 1. Backend Service (Web Service)

Create a new **Web Service** on Render and connect your repository.

### Settings
| Setting | Value |
| :--- | :--- |
| **Name** | `task-flow-backend` (Must match the URL hardcoded in the frontend proxy) |
| **Root Directory** | `server` |
| **Environment** | `Node` |
| **Build Command** | `npm install` |
| **Start Command** | `node index.js` |

### Environment Variables
Add these key-value pairs in the "Environment" tab:

| Key | Value | Description |
| :--- | :--- | :--- |
| `MONGO_URI` | `mongodb+srv://...` | Your generic MongoDB connection string |
| `JWT_SECRET` | `...` | A long random string for security (e.g. generated by `openssl rand -hex 32`) |
| `GEMINI_API_KEY` | `AIza...` | Your Google Gemini API Key |
| `GROQ_API_KEY` | `gsk_...` | Your Groq API Key |
| `BREVO_API_KEY` | `xkeysib-...` | Your Brevo API Key for emails |
| `CLIENT_URL` | `https://task-flow-frontend.onrender.com` | URL of your frontend (update this after creating the frontend) |
| `BREVO_SENDER_EMAIL` | `noreply@taskflow.app` | (Optional) Sender email for notifications |
| `BREVO_SENDER_NAME` | `TaskFlow` | (Optional) Sender name for notifications |
| `PORT` | `5000` | (Optional) Render sets this automatically, but good to have |

---

## 2. Frontend Service (Web Service)

Create another **Web Service** for the frontend.

### Settings
| Setting | Value |
| :--- | :--- |
| **Name** | `task-flow-frontend` (Or your preferred name) |
| **Root Directory** | `.` (Leave empty / default) |
| **Environment** | `Node` |
| **Build Command** | `npm install; npm run build` |
| **Start Command** | `npm start` |

### Environment Variables
| Key | Value | Description |
| :--- | :--- | :--- |
| `NODE_ENV` | `production` | Optimizes Next.js for production |

---

## ðŸ›‘ Critical Note on Connectivity
Your frontend code currently points to a specific backend URL in `src/app/api/[...proxy].ts`:
> `const TARGET = "https://task-flow-backend.onrender.com";`

**You must ensure your Backend Service is named `task-flow-backend` so that the URL matches.**
If Render assigns a different URL (e.g., `task-flow-backend-123.onrender.com`), you will need to:
1. Update `src/app/api/[...proxy].ts` with the new URL.
2. Commit and push the change to GitHub.
3. Redeploy the Frontend.
